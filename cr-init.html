<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  Подключаю…
  <script>
    (async function () {
      const tg = window.Telegram.WebApp;
      tg.ready();

      const initData = tg.initData || "";
      const userId = tg.initDataUnsafe?.user?.id;

      if (!initData || !userId) {
        document.body.textContent = "Ошибка: нет initData/userId";
        return;
      }

      const BRIDGE = "https://something-xyz.trycloudflare.com"; // <-- ВСТАВЬ СЮДА
      const r = await fetch(BRIDGE + "/save", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ initData, tgUserId: userId })
      });

      const j = await r.json();
      if (!j.ok) {
        document.body.textContent = "Ошибка: " + (j.error || "save failed");
        return;
      }

      document.body.textContent = "✅ Готово!";
      setTimeout(() => tg.close(), 700);
    })();
  </script>
</body>
</html>
